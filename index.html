<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ждите чего-то грандиозного...</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{background:#0a001f;color:#fff;height:100vh;overflow:hidden;font-family:'Segoe UI',sans-serif}
    .stars{position:fixed;inset:0;background:url('https://assets.codepen.io/1538474/stars.png');animation:t 8s infinite}
    @keyframes t{0%,100%{opacity:.7}50%{opacity:1}}
    .aurora{position:fixed;top:0;width:100%;height:40%;background:linear-gradient(90deg,#ff0080,#ff8c00,#ffd700,#00ff80);opacity:.25;filter:blur(100px);animation:a 20s infinite alternate}
    @keyframes a{0%{transform:translateX(-30%)}100%{transform:translateX(30%)}}
    .snow{position:fixed;inset:0;pointer-events:none;z-index:5}
    .snowflake{position:absolute;color:#fff;font-size:1.8em;animation:snow linear infinite;user-select:none}
    @keyframes snow{to{transform:translateY(100vh) rotate(720deg)}}
    .page{position:fixed;inset:0;transition:opacity 1.5s;opacity:0;z-index:-1}
    .page.active{opacity:1;z-index:10}
    .card{background:rgba(10,0,40,.9);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:20px;max-width:420px}
    .btn-gold{background:linear-gradient(45deg,#ffd700,#ffb347);border:none;color:#000;font-weight:bold}
    .btn-google{background:#fff;color:#444;border:1px solid #ccc;display:flex;align-items:center;justify-content:center;gap:10px}
    .grand-title{font-size:8.5rem;font-weight:900;line-height:1.1;background:linear-gradient(45deg,#ff0080,#ff8c00,#ffd700,#00ff80,#0080ff);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 0 100px gold;animation:pulse 3s infinite, rainbow 12s linear infinite;letter-spacing:10px}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    @keyframes rainbow{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}
  </style>
</head>
<body>

  <!-- Экран входа -->
  <div id="auth" class="page active d-flex align-items-center justify-content-center">
    <div class="stars"></div>
    <div class="card shadow-lg p-5 text-center">
      <h1 style="color:#ffd700;font-size:3rem">Доступ к магии</h1>
      <p class="mb-4 text-light">Выбери способ входа</p>

      <button id="googleBtn" class="btn btn-google btn-lg w-100 mb-3">
        Войти через Google
      </button>

      <div class="text-center mb-3 text-muted">или по email</div>

      <input type="email" id="email" class="form-control form-control-lg mb-3" placeholder="Email">
      <input type="password" id="pass" class="form-control form-control-lg mb-3" placeholder="Пароль">

      <div class="d-grid gap-2">
        <button id="login" class="btn btn-outline-light btn-lg">Войти</button>
        <button id="register" class="btn btn-gold btn-lg">Зарегистрироваться</button>
      </div>
      <div id="msg" class="mt-3 text-danger fw-bold"></div>
    </div>
  </div>

  <!-- Модальное окно с кодом от Tlit -->
  <div class="modal fade" id="tlitModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-dark text-light border-warning" style="border-width:3px!important">
        <div class="modal-header border-0">
          <h5 class="modal-title">Секретный доступ от Tlit</h5>
        </div>
        <div class="modal-body text-center py-4">
          <p class="lead">Введи код, чтобы увидеть магию:</p>
          <input type="text" id="tlitCode" class="form-control form-control-lg text-center" placeholder="••••••••" maxlength="8" style="letter-spacing:8px;font-size:2rem">
        </div>
        <div class="modal-footer border-0 justify-content-center">
          <button id="tlitSubmit" class="btn btn-gold btn-lg px-5">Войти в магию</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Главный экран -->
  <div id="magic" class="page text-center d-flex flex-column justify-content-center align-items-center position-relative">
    <div class="snow"></div>
    <div class="aurora"></div>
    
    <h1 class="grand-title">ЖДИТЕ ЧТО-ТО<br>ГРАНДИОЗНОЕ</h1>

    <div style="position:absolute;bottom:30px;right:50px;transform:rotate(-15deg);font-size:2rem;color:#ffd700;text-shadow:0 0 30px gold;letter-spacing:3px;opacity:0.9">
      Design by Tlit
    </div>

    <div class="tree" style="width:220px;height:320px;background:conic-gradient(from 0deg at 50% 10%,#0f0 0deg,#0c0 30deg,#090 60deg,transparent 90deg);border-radius:50% 50% 50% 50% / 60% 60% 40% 40%;position:relative;animation:tr 4s infinite;margin-top:40px">
      <div style="position:absolute;top:-35px;left:50%;transform:translateX(-50%);font-size:70px;color:gold;animation:st 3s infinite">★</div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <script>
    // Секретный код от Tlit — спрятан ОЧЕНЬ хитро (никто не найдёт)
    const _0x4a2f=['VGxpdDIwMjY=']; // Tlit2026 в base64, но не напрямую

    const firebaseConfig = {
      apiKey: "AIzaSyCDW7tqHvORYUSO5r4lxhzg8hO-cbwnr-A",
      authDomain: "newearsitette2025.firebaseapp.com",
      projectId: "newearsitette2025",
      storageBucket: "newearsitette2025.firebasestorage.app",
      messagingSenderId: "857563274920",
      appId: "1:857563274920:web:712fee6831652edbe12c9d"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const tlitModal = new bootstrap.Modal(document.getElementById('tlitModal'));

    auth.onAuthStateChanged(user => {
      if (user && localStorage.getItem('lastLogin') && Date.now() - localStorage.getItem('lastLogin') < 300000) {
        if (localStorage.getItem('tlitPassed') === 'yes') {
          openMagic();
        } else {
          setTimeout(() => tlitModal.show(), 600);
        }
      }
    });

    // Google — сразу в магия (код не нужен)
    document.getElementById('googleBtn').onclick = () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider).then(() => {
        localStorage.setItem('lastLogin', Date.now());
        localStorage.setItem('tlitPassed', 'yes');
        openMagic();
      });
    };

    // Вход и регистрация по email — потом просим код
    const afterEmailAuth = () => {
      localStorage.setItem('lastLogin', Date.now());
      tlitModal.show();
    };

    document.getElementById('login').onclick = () => {
      const e = document.getElementById('email').value.trim();
      const p = document.getElementById('pass').value;
      if (!e || !p) return showMsg('Заполните поля');
      auth.signInWithEmailAndPassword(e, p).then(afterEmailAuth).catch(err => showMsg('Ошибка входа'));
    };

    document.getElementById('register').onclick = () => {
      const e = document.getElementById('email').value.trim();
      const p = document.getElementById('pass').value;
      if (!e || !p) return showMsg('Заполните поля');
      if (p.length < 6) return showMsg('Пароль минимум 6 символов');
      auth.createUserWithEmailAndPassword(e, p).then(afterEmailAuth).catch(err => showMsg('Email занят или ошибка'));
    };

    };

    // Проверка кода
    document.getElementById('tlitSubmit').onclick = () => {
      const input = document.getElementById('tlitCode').value.trim();
      // Секретная проверка (код спрятан в base64 и обфусцирован)
      if (input === atob(_0x4a2f[0])) {
        localStorage.setItem('tlitPassed', 'yes');
        tlitModal.hide();
        openMagic();
      } else {
        document.getElementById('tlitCode').value = '';
        alert('Неверный код. Попробуй ещё раз');
      }
    };

    function showMsg(t) { document.getElementById('msg').textContent = t; }

    function openMagic() {
      document.getElementById('auth').classList.remove('active');
      document.getElementById('magic').classList.add('active');

      const snowContainer = document.querySelector('.snow');
      const symbols = '❅❆✻❄✦✧❉❋❊✵';
      for(let i = 0; i < 300; i++) {
        const s = document.createElement('div');
        s.className = 'snowflake';
        s.textContent = symbols[Math.floor(Math.random() * symbols.length)];
        s.style.left = Math.random() * 100 + 'vw';
        s.style.animationDuration = 8 + Math.random() * 15 + 's';
        s.style.opacity = 0.3 + Math.random() * 0.7;
        s.style.fontSize = 0.7 + Math.random() * 1.6 + 'em';
        snowContainer.appendChild(s);
      }
    }
  </script>
</body>
</html>
