<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>С Новым 2026 годом!</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{background:#0a001f;color:#fff;height:100vh;overflow:hidden;font-family:Arial,sans-serif}
    .stars{position:fixed;inset:0;background:url('https://assets.codepen.io/1538474/stars.png');animation:t 8s infinite}
    @keyframes t{0%,100%{opacity:.7}50%{opacity:1}}
    .aurora{position:fixed;top:0;width:100%;height:40%;background:linear-gradient(90deg,#00f260,#0575e6,#a166ab,#f093fb);opacity:.3;filter:blur(80px);animation:a 20s infinite alternate}
    @keyframes a{0%{transform:translateX(-20%)}100%{transform:translateX(20%)}}
    .snow{position:fixed;inset:0;pointer-events:none}
    .snow div{position:absolute;color:#fff;font-size:1.5em;animation:s linear infinite}
    @keyframes s{to{transform:translateY(100vh) rotate(360deg)}}
    .page{position:fixed;inset:0;transition:opacity 1.5s;opacity:0;z-index:-1}
    .page.active{opacity:1;z-index:10}
    .card{background:rgba(10,0,40,.9);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:20px;max-width:420px}
    .btn-gold{background:linear-gradient(45deg,#ffd700,#ffb347);border:none;color:#000;font-weight:bold}
    .btn-google{background:#fff;color:#444;border:1px solid #ccc;display:flex;align-items:center;justify-content:center;gap:10px}
    .magic-title{font-size:5rem;background:linear-gradient(45deg,#ffd700,#fff,#87CEEB);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 0 40px gold;animation:g 3s infinite}
    @keyframes g{0%{text-shadow:0 0 40px gold}100%{text-shadow:0 0 80px #fff}}
    .tree{width:220px;height:320px;background:conic-gradient(from 0deg at 50% 10%,#0f0 0deg,#0c0 30deg,#090 60deg,transparent 90deg);border-radius:50% 50% 50% 50% / 60% 60% 40% 40%;position:relative;animation:tr 4s infinite;margin:40px auto}
    .tree::before{content:"★";position:absolute;top:-35px;left:50%;transform:translateX(-50%);font-size:70px;color:gold;animation:st 3s infinite}
    @keyframes tr{0%,100%{filter:brightness(1)}50%{filter:brightness(1.6)}}
    @keyframes st{0%,100%{transform:translateX(-50%) scale(1)}50%{transform:translateX(-50%) scale(1.3)}}
  </style>
</head>
<body>

  <div id="auth" class="page active d-flex align-items-center justify-content-center">
    <div class="stars"></div>
    <div class="card shadow-lg p-5 text-center">
      <h1 style="color:#ffd700;font-size:3rem">Скоро Новый год!</h1>
      <p class="mb-4">Выбери способ входа</p>

      <button id="googleBtn" class="btn btn-google btn-lg w-100 mb-4">
        Войти через Google
      </button>

      <div class="text-center mb-3 text-muted">или по email</div>

      <input type="email" id="email" class="form-control form-control-lg mb-3" placeholder="Email">
      <input type="password" id="pass" class="form-control form-control-lg mb-3" placeholder="Пароль">

      <div class="d-grid gap-2">
        <button id="login" class="btn btn-outline-light btn-lg">Войти</button>
        <button id="register" class="btn btn-gold btn-lg">Зарегистрироваться</button>
      </div>

      <div id="msg" class="mt-3 text-danger fw-bold"></div>
    </div>
  </div>

  <div id="magic" class="page text-center d-flex flex-column justify-content-center align-items-center">
    <div class="snow"></div>
    <div class="aurora"></div>
    <h1 class="magic-title">С НОВЫМ 2026 ГОДОМ!</h1>
    <div class="tree"></div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCDW7tqHvORYUSO5r4lxhzg8hO-cbwnr-A",
      authDomain: "newearsitette2025.firebaseapp.com",
      projectId: "newearsitette2025",
      storageBucket: "newearsitette2025.firebasestorage.app",
      messagingSenderId: "857563274920",
      appId: "1:857563274920:web:712fee6831652edbe12c9d"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Автовход 5 минут
    auth.onAuthStateChanged(user => {
      if (user && localStorage.getItem('lastLogin') && Date.now() - localStorage.getItem('lastLogin') < 300000) {
        openMagic();
      }
    });

    // Google
    document.getElementById('googleBtn').onclick = () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then(() => { localStorage.setItem('lastLogin', Date.now()); openMagic(); })
        .catch(err => showMsg('Ошибка Google: ' + err.message));
    };

    // Вход
    document.getElementById('login').onclick = () => {
      const email = document.getElementById('email').value.trim();
      const pass = document.getElementById('pass').value;
      if (!email || !pass) return showMsg('Введи email и пароль');
      auth.signInWithEmailAndPassword(email, pass)
        .then(() => { localStorage.setItem('lastLogin', Date.now()); openMagic(); })
        .catch(err => showMsg(getError(err.code)));
    };

    // Регистрация
    document.getElementById('register').onclick = () => {
      const email = document.getElementById('email').value.trim();
      const pass = document.getElementById('pass').value;
      if (!email || !pass) return showMsg('Введи email и пароль');
      if (pass.length < 6) return showMsg('Пароль минимум 6 символов');
      auth.createUserWithEmailAndPassword(email, pass)
        .then(() => { localStorage.setItem('lastLogin', Date.now()); openMagic(); })
        .catch(err => showMsg(getError(err.code)));
    };

    function getError(code) {
      const e = {
        'auth/user-not-found': 'Такого пользователя нет',
        'auth/wrong-password': 'Неправильный пароль',
        'auth/email-already-in-use': 'Email уже занят',
        'auth/invalid-email': 'Неправильный email',
        'auth/weak-password': 'Пароль слишком короткий',
        'auth/too-many-requests': 'Слишком много попыток, подожди минуту'
      };
      return e[code] || 'Ошибка, попробуй ещё раз';
    }

    function showMsg(text) {
      document.getElementById('msg').textContent = text;
    }

    function openMagic() {
      document.getElementById('auth').classList.remove('active');
      document.getElementById('magic').classList.add('active');
      setTimeout(() => {
        for(let i=0;i<200;i++){
          const s=document.createElement('div');
          s.textContent='❆❅✻*❄'[Math.floor(Math.random()*5)];
          s.style.left=Math.random()*100+'vw';
          s.style.animationDuration=6+Math.random()*14+'s';
          s.style.fontSize=(0.8+Math.random()*1.2)+'em';
          s.style.opacity=0.6+Math.random()*0.4;
          document.querySelector('.snow').appendChild(s);
        }
      }, 300);
    }
  </script>
</body>
</html>
